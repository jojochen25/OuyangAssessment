<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Data Manipulation Take Home Quiz</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="R Data Manipulation Take Home Quiz_files/libs/clipboard/clipboard.min.js"></script>
<script src="R Data Manipulation Take Home Quiz_files/libs/quarto-html/quarto.js"></script>
<script src="R Data Manipulation Take Home Quiz_files/libs/quarto-html/popper.min.js"></script>
<script src="R Data Manipulation Take Home Quiz_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="R Data Manipulation Take Home Quiz_files/libs/quarto-html/anchor.min.js"></script>
<link href="R Data Manipulation Take Home Quiz_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="R Data Manipulation Take Home Quiz_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="R Data Manipulation Take Home Quiz_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="R Data Manipulation Take Home Quiz_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="R Data Manipulation Take Home Quiz_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">R Data Manipulation Take Home Quiz</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<ol type="1">
<li>Plot a histogram showing the number of articles published per month, with fill color determined by whether there are more than 2 authors</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="R-Data-Manipulation-Take-Home-Quiz_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="2" type="1">
<li>Plot a histogram showing the number of articles published per month and year, with fill color determined by whether there are more than 2 authors</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="R-Data-Manipulation-Take-Home-Quiz_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="3" type="1">
<li>The first names need to be cleaned, they often include the first initial as well. Remove the initials and plot out the most common first names (with more than 30 mentions) in ascending order.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="R-Data-Manipulation-Take-Home-Quiz_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="3" type="1">
<li>Plot a histogram where the fill is by whether it is the first instance of that first name (Red) or if it has been shown before (Blue). For example, if the first month authors are (Albert, Ben, Carl, David), then all four will be Red, but if the second month authors are (Albert, Ben, Ed, Frank) then half will be Red (Ed and Frank are new) and half will be Blue (Albert and Ben are old).</li>
</ol>
<p>GO BACK ON THIS –if C Nicholas is first name, do we remove C</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="R-Data-Manipulation-Take-Home-Quiz_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="4" type="1">
<li>Create an author level data frame (ie, one row per author) that tracks the number publications they have in NEJM and average number of months between publications. (-1 if they have only one publication)</li>
</ol>
<p>Q: Do we calculate average num of months even for authors that only have 2 publications? I still calculated the mean here (for these authors, ave_num_months, num of months btn pubs/1)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,892 × 4
# Groups:   firstAuthorF [4,670]
   firstAuthorF firstAuthorL num_pub ave_num_months
   &lt;chr&gt;        &lt;chr&gt;          &lt;int&gt;          &lt;dbl&gt;
 1 A Dorothee   Heemskerk          2            5  
 2 A Emre       Eskazan            1           -1  
 3 A Fuat       Kalyoncu           1           -1  
 4 A Hunter     Shain              2            4  
 5 A Keith      Stewart            2            4  
 6 A Kumar      Guddati            1           -1  
 7 A Laurie     Shroyer            2            3  
 8 A Lianne     Messchendorp       1           -1  
 9 A Marc       Gillinov           3            8  
10 A Metin      Gülmezoglu         1           -1  
11 A Michael    Lincoff            1           -1  
12 A Razzaque   Ahmed              1           -1  
13 A Tariro     Makadzange         1           -1  
14 A Taylor     Kelley             1           -1  
15 A Titia      Lely               1           -1  
16 A-Rembert    Koczulla           1           -1  
17 Aaron        Belkin             1           -1  
18 Aaron        McKethan           1           -1  
19 Aaron        Richterman         2           26  
20 Aaron        Sibley             1           -1  
21 Aaron        Spital             7           10.7
22 Aaron A R    Tobian             2            5  
23 Aaron B      Caughey            2            4  
24 Aaron D      Viny               1           -1  
25 Aaron I      Vinik              1           -1  
26 Aaron J      Stonestrom         1           -1  
27 Aaron L      Berkowitz          1           -1  
28 Aaron L      Schwartz           2           25  
29 Aaron M      Goodman            1           -1  
30 Aaron S      Kelly              1           -1  
31 Aaron S      Kesselheim         2            8  
32 Aaron W      Aday               1           -1  
33 Aasma        Shaukat            1           -1  
34 Abby L       Olsen              1           -1  
35 Abdallah M   Beano              1           -1  
36 Abdenasser   Bardai             1           -1  
37 Abdul        Rehman             1           -1  
38 AbdulAziz A  Asbeutah           1           -1  
39 Abdullah     Alkhodair          1           -1  
40 Abdullah     Alsultan           1           -1  
41 Abdurrahman  Oguzhan            1           -1  
42 Abel         Kakuru             1           -1  
43 Abhaya V     Kulkarni           1           -1  
44 Abhilash     Koratala           1           -1  
45 Abhirup      Banerjee           1           -1  
46 Abhishek     Keraliya           1           -1  
47 Abhishek     Maiti              1           -1  
48 Abhishek     Sharma             2           37  
49 Abigail      Silva              1           -1  
50 Abigail      Zuger              1           -1  
# ℹ 6,842 more rows</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>How can you use the dataset to summarize what are the leading institutions that publish in NEJM</li>
</ol>
<p>The email addresses contain the institution name–I would extract the institutional domain (all characters after “@”). I would filter through the domains and drop rows with emails ending in .com or .net as emails that don’t have this ending are from institutions. Assuming the df doesn’t contain duplicate publications, I would then group the df by domain name and use summarize to count the occurrences of each domain to find the most common institutions. I would then arrange the df by num of occurrenes of domain in descending order so that the leading institutions are at the top.</p>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>